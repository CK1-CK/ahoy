<!doctype html>
<html>
    <head>
        <title>Update</title>
        {#HTML_HEADER}
    </head>
    <body>
        {#HTML_NAV}
        <div id="wrapper">
            <div id="content">
                <fieldset>
                    <legend class="des">{#SELECT_FILE} (*.bin)</legend>
                    <p>{#INSTALLED_VERSION}: <span id="version" style="background-color: var(--input-bg); padding: 7px;"></span></p>
                    <form id="form" method="POST" action="/update" enctype="multipart/form-data" accept-charset="utf-8">
                        <input type="file" name="update">
                        <input type="button" class="btn my-4" value="{#BTN_UPDATE}" onclick="hide()">
                    </form>
                </fieldset>
                <div class="row mt-4">
                    <a href="https://fw.ahoydtu.de" target="_blank">{#DOWNLOADS}<a/>
                </div>
            </div>
        </div>
        {#HTML_FOOTER}
        <script type="text/javascript">
            function parseGeneric(obj) {
                parseNav(obj);
                parseESP(obj);
                parseRssi(obj);
                document.getElementById("version").innerHTML = "{#VERSION_FULL}_" + obj.env + ".bin"
            }

            function hide() {
                document.getElementById("form").submit();
                var e = document.getElementById("content");
                e.replaceChildren(span("{#UPDATE_STARTED}"));
            }

            getAjax("/api/generic", parseGeneric);
        </script>
    </body>
</html>
